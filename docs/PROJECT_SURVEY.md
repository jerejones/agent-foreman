# Project Survey (AI-Enhanced)

## Summary

Agent Foreman is a TypeScript-based CLI harness designed to manage long-running tasks for AI agents. It implements a feature-driven development workflow with external memory (JSON feature lists, audit logs), impact analysis, and integration with external AI tools (Claude, Gemini) to facilitate autonomous coding sessions.

> Analyzed by: gemini

## Tech Stack

| Aspect | Value |
|--------|-------|
| Language | TypeScript |
| Framework | Node.js (CLI) |
| Build Tool | tsc |
| Test Framework | Vitest |
| Package Manager | npm |

## Directory Structure

### Entry Points
- `src/index.ts`

### Source Directories
- `src/`

## Modules

### CLI Core
- **Path**: `src/index.ts`
- **Status**: complete
- **Description**: Main entry point handling command-line arguments and orchestration.

### Feature Management
- **Path**: `src/feature-list.ts`
- **Status**: complete
- **Description**: Manages the feature backlog, selection logic, and persistence.

### Progress Tracking
- **Path**: `src/progress-log.ts`
- **Status**: complete
- **Description**: Handles the audit log for session handoffs and history.

### AI Integration
- **Path**: `src/ai-scanner.ts`
- **Status**: complete
- **Description**: Coordinates AI agents (Claude, Gemini) for intelligent project analysis.

### Impact Analysis
- **Path**: `src/impact-analyzer.ts`
- **Status**: complete
- **Description**: Analyzes dependencies to recommend status updates when features change.

### Agent Execution
- **Path**: `src/agents.ts`
- **Status**: complete
- **Description**: Manages subprocess execution for external AI CLI tools.

## Discovered Features

| ID | Description | Module | Source | Confidence |
|----|-------------|--------|--------|------------|
| cli.survey | Generate AI-powered project survey report | CLI Core | config | 100% |
| cli.init | Initialize or upgrade the harness | CLI Core | config | 100% |
| cli.step | Select and display the next feature to work on | CLI Core | config | 100% |
| feature.select | Algorithm to pick highest priority feature (review > failing > priority) | Feature Management | controller | 90% |
| agent.spawn | Spawn AI agent processes with configurable permissions | Agent Execution | controller | 90% |
| impact.analyze | Calculate cascade effects of feature changes | Impact Analysis | controller | 90% |
| scan.directory | Recursively scan directory structure for context | AI Integration | controller | 80% |

## Completion Assessment

**Overall: 90%**

**Notes:**
- Core functionality is implemented and tested.
- Project structure is well-defined with separation of concerns.
- Test coverage exists for all major modules.

## Recommendations

- Implement a `rollback` command to undo the last step in the progress log.
- Enhance impact analysis to support static code analysis for detecting undeclared dependencies.
- Add support for more AI agent backends beyond Claude, Gemini, and Codex.

## Commands

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build

# Run tests
npm test
```

---

*Generated by agent-foreman with AI analysis*